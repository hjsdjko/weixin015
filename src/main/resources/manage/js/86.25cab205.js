"use strict";(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[86],{87086:(e,n,l)=>{l.r(n),l.d(n,{default:()=>C});l(39524),l(30721),l(16158),l(63134),l(33510),l(41808),l(87547),l(8971),l(43448),l(86696),l(40073),l(1680),l(30826),l(3299),l(56505),l(98218),l(68838),l(36507);var a=l(67377),i=l(98479),u=(l(31250),l(51290)),t=l(86754),o=l(54432),r=(l(31818),l(51284),l(75014),l(52443),{class:"formModel_btn_box"});const d={__name:"formModel",emits:["formModelChange"],setup:function(e,n){var l,i=n.expose,t=n.emit,o=null===(l=(0,a.FN)())||void 0===l?void 0:l.appContext.config.globalProperties,d="peisongyuan",s="配送员",c=(0,u.iH)({}),g=(0,u.iH)({peisongyuanzhanghao:!1,mima:!1,peisongyuanxingming:!1,touxiang:!1,xingbie:!1,lianxidianhua:!1}),v=(0,u.iH)(!1),f=(0,u.iH)(!1),p=(0,u.iH)(""),m=function(e,n,l){n?null!==o&&void 0!==o&&o.$toolUtil.isMobile(n)?l():l(new Error("请输入正确的手机号码")):l()},h=(0,u.iH)({peisongyuanzhanghao:[{required:!0,message:"请输入",trigger:"blur"}],mima:[{required:!0,message:"请输入",trigger:"blur"}],peisongyuanxingming:[{required:!0,message:"请输入",trigger:"blur"}],touxiang:[],xingbie:[],lianxidianhua:[{validator:m,trigger:"blur"}]}),w=(0,u.iH)(null),b=(0,u.iH)(0),y=(0,u.iH)(""),x=function(e){c.value.touxiang=e},_=(0,u.iH)([]),k=function(){c.value={peisongyuanzhanghao:"",mima:"",peisongyuanxingming:"",touxiang:"",xingbie:"",lianxidianhua:""}},W=function(){null===o||void 0===o||o.$http({url:"".concat(d,"/info/").concat(b.value),method:"get"}).then((function(e){new RegExp("../../../file","g");c.value=e.data.data,v.value=!0}))},z=(0,u.iH)(""),U=(0,u.iH)(""),C=(0,u.iH)(""),H=(0,u.iH)(""),V=(0,u.iH)(""),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(k(),e&&(b.value=e,y.value=n),"add"==n)f.value=!0,p.value="新增"+s,v.value=!0;else if("info"==n)f.value=!1,p.value="查看"+s,W();else if("edit"==n)f.value=!0,p.value="修改"+s,W();else if("cross"==n){for(var d in f.value=!0,p.value=l,a)"peisongyuanzhanghao"!=d?"mima"!=d?"peisongyuanxingming"!=d?"touxiang"!=d?"xingbie"!=d?"lianxidianhua"!=d||(c.value.lianxidianhua=a[d],g.value.lianxidianhua=!0):(c.value.xingbie=a[d],g.value.xingbie=!0):(c.value.touxiang=a[d],g.value.touxiang=!0):(c.value.peisongyuanxingming=a[d],g.value.peisongyuanxingming=!0):(c.value.mima=a[d],g.value.mima=!0):(c.value.peisongyuanzhanghao=a[d],g.value.peisongyuanzhanghao=!0);a&&(z.value=a),i&&(U.value=i),t&&(C.value=t),u&&(H.value=u),r&&(V.value=r),v.value=!0}null===o||void 0===o||o.$http({url:"".concat(null===o||void 0===o?void 0:o.$toolUtil.storageGet("sessionTable"),"/session"),method:"get"}).then((function(e){e.data.data})),_.value="男,女".split(",")};i({init:$});var j=function(){v.value=!1},M=function(){null!=c.value.touxiang&&(c.value.touxiang=c.value.touxiang.replace(new RegExp(null===o||void 0===o?void 0:o.$config.url,"g"),""));U.value;var e=JSON.parse(JSON.stringify(z.value)),n="",l="",a="";if("cross"==y.value&&""!=H.value)if(H.value.startsWith("["))n=null===o||void 0===o?void 0:o.$toolUtil.storageGet("userid"),l=e["id"],a=H.value.replace(/\[/,"").replace(/\]/,"");else{for(var i in e)i==H.value&&(e[i]=V.value);q(e)}w.value.validate((function(e){if(e)if(n&&l){c.value.crossuserid=n,c.value.crossrefid=l;var i={page:1,limit:1e3,crossuserid:c.value.crossuserid,crossrefid:c.value.crossrefid};null===o||void 0===o||o.$http({url:"".concat(d,"/page"),method:"get",params:i}).then((function(e){if(e.data.data.total>=a)return null===o||void 0===o||o.$toolUtil.message("".concat(C.value),"error"),!1;null===o||void 0===o||o.$http({url:"".concat(d,"/").concat(c.value.id?"update":"save"),method:"post",data:c.value}).then((function(e){null===o||void 0===o||o.$toolUtil.message("操作成功","success",(function(){v.value=!1,t("formModelChange")}))}))}))}else null===o||void 0===o||o.$http({url:"".concat(d,"/").concat(c.value.id?"update":"save"),method:"post",data:c.value}).then((function(e){null===o||void 0===o||o.$toolUtil.message("操作成功","success",(function(){v.value=!1,t("formModelChange")}))}))}))},q=function(e){null===o||void 0===o||o.$http({url:"".concat(U.value,"/update"),method:"post",data:e}).then((function(e){}))};return function(e,n){var l=(0,a.up)("el-input"),i=(0,a.up)("el-form-item"),u=(0,a.up)("el-col"),t=(0,a.up)("uploads"),o=(0,a.up)("el-option"),d=(0,a.up)("el-select"),s=(0,a.up)("el-row"),m=(0,a.up)("el-form"),b=(0,a.up)("el-button"),k=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(k,{modelValue:v.value,"onUpdate:modelValue":n[5]||(n[5]=function(e){return v.value=e}),title:p.value,width:"80%","destroy-on-close":"",fullscreen:!1},(0,a.Nv)({default:(0,a.w5)((function(){return[(0,a.Wm)(m,{class:"formModel_form",ref_key:"formRef",ref:w,model:c.value,"label-width":"$template2.back.add.form.base.labelWidth",rules:h.value},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{span:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{label:"配送员账号",prop:"peisongyuanzhanghao"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"list_inp",modelValue:c.value.peisongyuanzhanghao,"onUpdate:modelValue":n[0]||(n[0]=function(e){return c.value.peisongyuanzhanghao=e}),placeholder:"配送员账号",type:"text",readonly:!(f.value&&!g.value.peisongyuanzhanghao)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,a.Wm)(u,{span:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{label:"密码",prop:"mima"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"list_inp",modelValue:c.value.mima,"onUpdate:modelValue":n[1]||(n[1]=function(e){return c.value.mima=e}),placeholder:"密码",type:"password",readonly:!(f.value&&!g.value.mima)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,a.Wm)(u,{span:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{label:"配送员姓名",prop:"peisongyuanxingming"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"list_inp",modelValue:c.value.peisongyuanxingming,"onUpdate:modelValue":n[2]||(n[2]=function(e){return c.value.peisongyuanxingming=e}),placeholder:"配送员姓名",type:"text",readonly:!(f.value&&!g.value.peisongyuanxingming)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,a.Wm)(u,{span:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{prop:"touxiang",label:"头像"},{default:(0,a.w5)((function(){return[(0,a.Wm)(t,{disabled:!(f.value&&!g.value.touxiang),action:"file/upload",tip:"请上传头像",limit:3,style:{width:"100%","text-align":"left"},fileUrls:c.value.touxiang?c.value.touxiang:"",onChange:x},null,8,["disabled","fileUrls"])]})),_:1})]})),_:1}),(0,a.Wm)(u,{span:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{label:"性别",prop:"xingbie"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{class:"list_sel",disabled:!(f.value&&!g.value.xingbie),modelValue:c.value.xingbie,"onUpdate:modelValue":n[3]||(n[3]=function(e){return c.value.xingbie=e}),placeholder:"请选择性别"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.value,(function(e,n){return(0,a.wg)(),(0,a.j4)(o,{label:e,value:e},null,8,["label","value"])})),256))]})),_:1},8,["disabled","modelValue"])]})),_:1})]})),_:1}),(0,a.Wm)(u,{span:12},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{label:"联系电话",prop:"lianxidianhua"},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{class:"list_inp",modelValue:c.value.lianxidianhua,"onUpdate:modelValue":n[4]||(n[4]=function(e){return c.value.lianxidianhua=e}),placeholder:"联系电话",type:"text",readonly:!(f.value&&!g.value.lianxidianhua)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]})),_:2},[f.value||"logistics"==y.value||"reply"==y.value?{name:"footer",fn:(0,a.w5)((function(){return[(0,a._)("span",r,[(0,a.Wm)(b,{class:"formModel_cancel",onClick:j},{default:(0,a.w5)((function(){return[(0,a.Uk)("取消")]})),_:1}),(0,a.Wm)(b,{class:"formModel_confirm",type:"primary",onClick:M},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 提交 ")]})),_:1})])]})),key:"0"}:void 0]),1032,["modelValue","title"])])}}};var s=l(57326);const c=(0,s.Z)(d,[["__scopeId","data-v-660ad958"]]),g=c;var v=function(e){return(0,a.dD)("data-v-657ac9e2"),e=e(),(0,a.Cn)(),e},f={class:"app-contain"},p={class:"list_search_view"},m={class:"search_view"},h=v((function(){return(0,a._)("div",{class:"search_label"}," 配送员账号： ",-1)})),w={class:"search_box"},b={class:"search_btn_view"},y=v((function(){return(0,a._)("br",null,null,-1)})),x={class:"btn_view"},_=v((function(){return(0,a._)("br",null,null,-1)})),k={key:0},W={key:1};const z={__name:"list",setup:function(e){var n,l=null===(n=(0,a.FN)())||void 0===n?void 0:n.appContext.config.globalProperties,r="peisongyuan",d="配送员";(0,t.yj)();(0,a.bv)((function(){}));var s=(0,u.iH)(null),c=(0,u.iH)(null),v=(0,u.iH)({page:1,limit:20,sort:"id",order:"desc"}),z=(0,u.iH)({}),U=(0,u.iH)([]),C=(0,u.iH)(!1),H=function(e){(0,a.Y3)((function(){c.value.clearSelection(),c.value.toggleRowSelection(e)}))},V=function(){C.value=!0;var e=JSON.parse(JSON.stringify(v.value));e["sort"]="id",e["order"]="desc",z.value.peisongyuanzhanghao&&""!=z.value.peisongyuanzhanghao&&(e["peisongyuanzhanghao"]="%"+z.value.peisongyuanzhanghao+"%"),null===l||void 0===l||l.$http({url:"".concat(r,"/page"),method:"get",params:e}).then((function(e){C.value=!1,s.value=e.data.data.list,M.value=Number(e.data.data.total)}))},$=function(e){var n=(0,u.iH)([]);if(e)n.value=[e];else{if(!U.value.length)return!1;for(var a in U.value)n.value.push(U.value[a].id)}o.T.confirm("是否删除选中".concat(d),"提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){null===l||void 0===l||l.$http({url:"".concat(r,"/delete"),method:"post",data:n.value}).then((function(e){null===l||void 0===l||l.$toolUtil.message("删除成功","success",(function(){V()}))}))}))},j=function(e){U.value=e},M=(0,u.iH)(0),q=(0,u.iH)(["prev","pager","next"]),N=function(e){v.value.limit=e,V()},S=function(e){v.value.page=e,V()},D=function(){v.value.page=v.value.page-1,V()},R=function(){v.value.page=v.value.page+1,V()},J=function(e,n){return null===l||void 0===l?void 0:l.$toolUtil.isAuth(e,n)},O=function(){v.value.page=1,V()},T=(0,u.iH)(null),E=function(){O()},F=function(){T.value.init()},P=function(){U.value.length&&T.value.init(U.value[0].id,"edit")},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?T.value.init(e,"info"):U.value.length&&T.value.init(U.value[0].id,"info")},B=function(){V()};return B(),function(e,n){var l=(0,a.up)("el-input"),u=(0,a.up)("el-button"),t=(0,a.up)("el-form"),o=(0,a.up)("el-table-column"),r=(0,a.up)("el-image"),d=(0,a.up)("el-table"),V=(0,a.up)("el-pagination"),B=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",f,[(0,a._)("div",p,[(0,a.Wm)(t,{model:z.value,class:"search_form"},{default:(0,a.w5)((function(){return[(0,a._)("div",m,[h,(0,a._)("div",w,[(0,a.Wm)(l,{class:"search_inp",modelValue:z.value.peisongyuanzhanghao,"onUpdate:modelValue":n[0]||(n[0]=function(e){return z.value.peisongyuanzhanghao=e}),placeholder:"配送员账号",clearable:""},null,8,["modelValue"])])]),(0,a._)("div",b,[(0,a.Wm)(u,{class:"search_btn",type:"primary",onClick:n[1]||(n[1]=function(e){return O()}),size:"small"},{default:(0,a.w5)((function(){return[(0,a.Uk)("搜索")]})),_:1})])]})),_:1},8,["model"]),y,(0,a._)("div",x,[J("peisongyuan","新增")?((0,a.wg)(),(0,a.j4)(u,{key:0,type:"success",onClick:F},{default:(0,a.w5)((function(){return[(0,a.Uk)("新增")]})),_:1})):(0,a.kq)("",!0),J("peisongyuan","查看")?((0,a.wg)(),(0,a.j4)(u,{key:1,type:"info",disabled:1!=U.value.length,onClick:n[2]||(n[2]=function(e){return A(null)})},{default:(0,a.w5)((function(){return[(0,a.Uk)("详情")]})),_:1},8,["disabled"])):(0,a.kq)("",!0),J("peisongyuan","修改")?((0,a.wg)(),(0,a.j4)(u,{key:2,type:"primary",disabled:1!=U.value.length,onClick:P},{default:(0,a.w5)((function(){return[(0,a.Uk)("修改")]})),_:1},8,["disabled"])):(0,a.kq)("",!0),J("peisongyuan","删除")?((0,a.wg)(),(0,a.j4)(u,{key:3,type:"danger",disabled:!U.value.length,onClick:n[3]||(n[3]=function(e){return $(null)})},{default:(0,a.w5)((function(){return[(0,a.Uk)("删除")]})),_:1},8,["disabled"])):(0,a.kq)("",!0)])]),_,J("peisongyuan","查看")?(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{key:0,border:"",stripe:!0,onSelectionChange:j,ref_key:"table",ref:c,data:s.value,onRowClick:H},{default:(0,a.w5)((function(){return[(0,a.Wm)(o,{resizable:!0,align:"left","header-align":"left",type:"selection",width:"55"}),(0,a.Wm)(o,{label:"序号",width:"70",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,a.w5)((function(e){return[(0,a.Uk)((0,i.zw)(e.$index+1),1)]})),_:1}),(0,a.Wm)(o,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"配送员账号"},{default:(0,a.w5)((function(e){return[(0,a.Uk)((0,i.zw)(e.row.peisongyuanzhanghao),1)]})),_:1}),(0,a.Wm)(o,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"配送员姓名"},{default:(0,a.w5)((function(e){return[(0,a.Uk)((0,i.zw)(e.row.peisongyuanxingming),1)]})),_:1}),(0,a.Wm)(o,{label:"头像",width:"120",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,a.w5)((function(n){return[n.row.touxiang?((0,a.wg)(),(0,a.iD)("div",k,["http"==n.row.touxiang.substring(0,4)?((0,a.wg)(),(0,a.j4)(r,{key:0,"preview-teleported":"","preview-src-list":[n.row.touxiang.split(",")[0]],src:n.row.touxiang.split(",")[0],style:{width:"100px",height:"100px"}},null,8,["preview-src-list","src"])):((0,a.wg)(),(0,a.j4)(r,{key:1,"preview-teleported":"","preview-src-list":[e.$config.url+n.row.touxiang.split(",")[0]],src:e.$config.url+n.row.touxiang.split(",")[0],style:{width:"100px",height:"100px"}},null,8,["preview-src-list","src"]))])):((0,a.wg)(),(0,a.iD)("div",W,"无图片"))]})),_:1}),(0,a.Wm)(o,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"性别"},{default:(0,a.w5)((function(e){return[(0,a.Uk)((0,i.zw)(e.row.xingbie),1)]})),_:1}),(0,a.Wm)(o,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"联系电话"},{default:(0,a.w5)((function(e){return[(0,a.Uk)((0,i.zw)(e.row.lianxidianhua),1)]})),_:1}),(0,a.Wm)(o,{label:"操作",width:"300",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,a.w5)((function(e){return[J("peisongyuan","查看")?((0,a.wg)(),(0,a.j4)(u,{key:0,type:"info",onClick:function(n){return A(e.row.id)}},{default:(0,a.w5)((function(){return[(0,a.Uk)("详情")]})),_:2},1032,["onClick"])):(0,a.kq)("",!0)]})),_:1})]})),_:1},8,["data"])),[[B,C.value]]):(0,a.kq)("",!0),(0,a.Wm)(V,{background:"",layout:q.value.join(","),total:M.value,"page-size":v.value.limit,"prev-text":"上一页","next-text":"下一页","hide-on-single-page":!1,style:{padding:"0",margin:"20px 0 0",whiteSpace:"nowrap",color:"#333",textAlign:"center",width:"100%",fontWeight:"500"},onSizeChange:N,onCurrentChange:S,onPrevClick:D,onNextClick:R},null,8,["layout","total","page-size"])]),(0,a.Wm)(g,{ref_key:"formRef",ref:T,onFormModelChange:E},null,512)])}}},U=(0,s.Z)(z,[["__scopeId","data-v-657ac9e2"]]),C=U}}]);
//# sourceMappingURL=86.25cab205.js.map